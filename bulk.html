<!DOCTYPE html>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<html>
<head>
<title>UK TIMES Codes &amp; Acronyms</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta charset="utf-8">
<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
<script src="d3.min.js"></script> <!-- From http://d3js.org/ -->
<script src="lunr.min.js"></script> <!-- From http://lunrjs.com -->
<style>
</style>
</head>
<body>
 <textarea class="" type="text" id="bulk" placeholder="" style='width:100%; height: 300px'></textarea>
 <input type='submit' id='add' value='add'></td>

<script>
var database = new Firebase("https://uk-times-acronyms.firebaseio.com/"); // Change this if you are forking the code

if(database.getAuth()) {
  // Logged in 
} else {
  // Log in
  database.authWithOAuthRedirect("github", function(error) { console.log(error); });
}

// This method is called anytime something is added to the database
database.on("child_added", function(snapshot) {
    console.log(snapshot);
    });


// This wires up the add button
d3.select('#add').on('click', function() {
    var tsv = d3.select('#bulk').node().value;
    var lines = tsv.split("\n");
 
    var result = [];
 
    var headers=lines[0].split("\t");
 
    for(var i=1;i<lines.length;i++){
 
    var obj = {};
    var currentline=lines[i].split("\t");

    for(var j=0;j<headers.length;j++){
      obj[headers[j]] = currentline[j];
    }
    database.push(obj);

    }
    });


</script>

</body>
</html>
